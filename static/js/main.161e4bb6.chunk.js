(this.webpackJsonpcahoots=this.webpackJsonpcahoots||[]).push([[0],{39:function(e,t,a){e.exports={centered:"styles_centered__x3bzC"}},43:function(e,t,a){e.exports=a(75)},48:function(e,t,a){},50:function(e,t,a){},74:function(e,t,a){e.exports={hero_heading:"styles_hero_heading__1odbt"}},75:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(27),l=a.n(c),o=(a(48),a(9)),i=a(22),u=(a(49),a(50),a(6)),s=a(77),m=a(78),d=a(79),h=a(80),f=a(81),g=a(13),E=a(16),v=a(19),b=a(18),p=a(20),j=a(51),O=JSON.parse('{"apiKey": "AIzaSyCVQuIPNV6lxmIXs2XHWUTzPkleI2Qo_o8","authDomain": "vialquiz-ea6a8.firebaseapp.com","databaseURL": "vialquiz-ea6a8.southamerica-east1.firebasedatabase.app","projectId": "vialquiz-ea6a8","storageBucket": "vialquiz-ea6a8.appspot.com","messagingSenderId": "927740651049","appId": "1:927740651049:web:3c8f3912f9c20d859e5e38","measurementId": "G-5G5HCQLWSF"}'),w=function e(t){Object(g.a)(this,e),j.apps.length||j.initializeApp(O),this.firestore=j.firestore(),this.auth=j.auth()},y=function(e){function t(){return Object(g.a)(this,t),Object(v.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(E.a)(t,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.firestore.collection("games").doc(t.gameId).collection("players").doc(e).get().then(this._convertDocToPlayer)}},{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.firestore;if("gameId"in e){var a=e.gameId;delete e.gameId,t=t.collection("games").doc(a).collection("players")}return t.add(e).then((function(e){return e.get()})).then(this._convertDocToPlayer)}},{key:"list",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0,n=this.firestore;return"gameId"in t&&(n=n.collection("games").doc(t.gameId)),n=n.collection("players"),"limit"in t&&(n=n.limit(t.limit)),void 0!==a?n.onSnapshot((function(t){var n=[];t.forEach((function(t){return n.push(e._convertDocToPlayer(t))})),a(n)})):n.get().then((function(t){return t.docs.map((function(t){return e._convertDocToQuestion(t)}))}))}},{key:"_convertDocToPlayer",value:function(e){return Object.assign({id:e.id},e.data())}}]),t}(w),C=function(e){return(new y).create(e)},I=a(76),k=a(39),S=a.n(k),N=function(e){return r.a.createElement(I.a,{className:S.a.centered,style:{maxWidth:e.maxWidth||null,height:e.verticalCentered?"100%":null}},e.children)},_=function(){function e(){Object(g.a)(this,e)}return Object(E.a)(e,null,[{key:"STATE_DRAFT",get:function(){return"draft"}},{key:"STATE_WAITING_FOR_PLAYERS",get:function(){return"waitingForPlayers"}}]),e}(),T=function(e){function t(){return Object(g.a)(this,t),Object(v.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(E.a)(t,[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.firestore.collection("games").add(Object.assign({state:_.STATE_DRAFT},e)).then((function(e){return e.get()})).then(this._convertDocToGame)}},{key:"get",value:function(e,t){var a=this,n=this._getGameDoc(e);return void 0!==t?n.onSnapshot((function(e){return t(a._convertDocToGame(e))})):n.get().then(this._convertDocToGame)}},{key:"list",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=this.firestore.collection("games");return"ownerId"in t&&(a=a.where("ownerId","==",t.ownerId)),"state"in t&&(a=a.where("state","==",t.state)),"shortCode"in t&&(a=a.where("shortCode","==",t.shortCode)),"limit"in t&&(a=a.limit(t.limit)),a.get().then((function(t){return t.docs.map((function(t){return e._convertDocToGame(t)}))}))}},{key:"update",value:function(e,t){var a=this._getGameDoc(e);return"currentQuestionId"in t&&(t.currentQuestion=a.collection("questions").doc(t.currentQuestionId),delete t.currentQuestionId),a.update(t)}},{key:"_getGameDoc",value:function(e){return this.firestore.collection("games").doc(e)}},{key:"_convertDocToGame",value:function(e){var t=Object.assign({id:e.id},e.data());return"currentQuestion"in t&&(t.currentQuestionId=t.currentQuestion.id,t.currentQuestion=t.currentQuestion.path),t}}]),t}(w),A=function(e,t){return(new T).get(e,t)},D=function(e){var t=e.playerName,a=e.setPlayerName,n=e.joinGame;return r.a.createElement(s.a,{onSubmit:function(e){e.preventDefault(),n()}},r.a.createElement(m.a,null,r.a.createElement(d.a,null,"Tu nombre:"),r.a.createElement(h.a,{value:t,onChange:function(e){return a(e.target.value)}})),r.a.createElement(f.a,{color:"primary",type:"submit"},"Unirse"))},x=function(){var e=Object(i.h)().gameId,t=Object(n.useState)(""),a=Object(u.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(""),s=Object(u.a)(o,2),m=s[0],d=s[1],h=Object(n.useState)(null),f=Object(u.a)(h,2),g=f[0],E=f[1];return Object(n.useEffect)((function(){e&&null===g&&A(e).then(E)}),[e,g]),r.a.createElement(N,{maxWidth:500,verticalCentered:!0},r.a.createElement("h1",null,g?g.name:null),m?r.a.createElement(i.a,{to:"/play/".concat(e,"/as/").concat(m)}):r.a.createElement(D,{playerName:c,setPlayerName:l,joinGame:function(){return C({name:c,gameId:e}).then((function(e){return d(e.id)}))}}))},q=a(82),Q=a(83),W=a(94),U=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(new y).get(e,t)},P=function(e){function t(){return Object(g.a)(this,t),Object(v.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(E.a)(t,[{key:"create",value:function(e){var t=this._popAttr(e,"gameId"),a=this._popAttr(e,"playerId"),n=this._popAttr(e,"questionId");return this.firestore.collection("games").doc(t).collection("answers").add(Object.assign({player:this.firestore.doc(["/games",t,"players",a].join("/")),question:this.firestore.doc(["/games",t,"questions",n].join("/"))},e)).then((function(e){return e.get()})).then(this._convertDocToAnswer)}},{key:"list",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=this.firestore;return"gameId"in t&&(a=a.collection("games").doc(t.gameId)),a=a.collection("answers"),"questionId"in t&&(a=a.where("question","==",this.firestore.doc("games/".concat(t.gameId,"/questions/").concat(t.questionId)))),"limit"in t&&(a=a.limit(t.limit)),a.get().then((function(t){return t.docs.map((function(t){return e._convertDocToAnswer(t)}))}))}},{key:"_convertDocToAnswer",value:function(e){return Object.assign({id:e.id},e.data())}},{key:"_popAttr",value:function(e,t){var a=e[t];return delete e[t],a}}]),t}(w);function G(e,t){var a=e[t];return delete e[t],a}var z=function(e){function t(){return Object(g.a)(this,t),Object(v.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(E.a)(t,[{key:"get",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.firestore,r={};return"gameId"in a&&(n=n.collection("games").doc(a.gameId).collection("questions"),r.gameId=a.gameId),n.doc(e).get().then((function(e){return t._convertDocToQuestion(e,r)}))}},{key:"create",value:function(e){var t=this,a=Object.assign({},e),n=G(a,"gameId");return this.firestore.collection("games").doc(n).collection("questions").add(a).then((function(e){return e.get()})).then((function(e){return t._convertDocToQuestion(e,{gameId:n})}))}},{key:"update",value:function(e,t){var a=Object.assign({},t),n=G(a,"gameId");return this.firestore.collection("games").doc(n).collection("questions").doc(e).update(a)}},{key:"list",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=this.firestore,n={};return"gameId"in t&&(a=a.collection("games").doc(t.gameId).collection("questions"),n.gameId=t.gameId),"from"in t&&(a=a.where("order",">",t.from)),a=a.orderBy("order"),"limit"in t&&(a=a.limit(t.limit)),a.get().then((function(t){return t.docs.map((function(t){return e._convertDocToQuestion(t,n)}))}))}},{key:"_convertDocToQuestion",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.assign({id:e.id},e.data(),t)}}]),t}(w),R=function(e){var t=new z;return(new T).get(e.gameId).then((function(e){return t.get(e.currentQuestionId,{gameId:e.id})})).then((function(t){return e.isCorrect=t.correctAnswer===e.choice,e.questionId=t.id,console.log(e),(new P).create(e)}))},F=function(e){var t=e.recordAnswer;return r.a.createElement(q.a,null,["A","B","C","D"].map((function(e){return r.a.createElement(Q.a,{sm:12,md:6,className:"mb-4",key:e},r.a.createElement(f.a,{className:"w-100 h-100",onClick:function(){return t(e)}},r.a.createElement("strong",null,e)))})))},L=function(){var e=Object(i.h)(),t=e.gameId,a=e.playerId,c=Object(n.useState)(),l=Object(u.a)(c,2),o=l[0],s=l[1],m=Object(n.useState)(""),d=Object(u.a)(m,2),h=d[0],f=d[1],g=Object(n.useState)(null),E=Object(u.a)(g,2),v=E[0],b=E[1],p=Object(n.useState)(""),j=Object(u.a)(p,2),O=j[0],w=j[1],y=function(e){e&&(b(null),s(e))};Object(n.useEffect)((function(){t&&a&&(A(t,y),U(a,{gameId:t}).then((function(e){return f(e.name)})))}),[t,a]);switch(o?o.state:null){case"pendingQuestion":return r.a.createElement(N,{maxWidth:500,verticalCentered:!0},"Proxima pregunta cargando...");case"showingQuestion":return v?r.a.createElement(N,{maxWidth:500,verticalCentered:!0},"Elegiste ",v.choice,"!"):r.a.createElement(N,{maxWidth:500,verticalCentered:!0},r.a.createElement(q.a,{className:"mb-4"},r.a.createElement(Q.a,{sm:12},r.a.createElement("h2",null,"Hola ",h,"!"),r.a.createElement("h3",null,"Elige tu respuesta:"))),r.a.createElement(F,{recordAnswer:function(e){R({playerId:a,playerName:h,gameId:t,choice:e}).then(b).catch((function(e){w(e),setTimeout((function(){return w("")}),5e3)}))}}),O?r.a.createElement(W.a,{color:"danger"},O):null);case"showingQuestionResults":return r.a.createElement(N,{maxWidth:500,verticalCentered:!0},r.a.createElement("div",null,"Showing question results..."));default:return r.a.createElement(N,{maxWidth:500,verticalCentered:!0},"Esperando a que empieze el juego")}},B=a(84),M=a(85),J=(a(74),function(e){return(new T).list({shortCode:String(e),state:_.STATE_WAITING_FOR_PLAYERS})}),H=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),g=Object(u.a)(l,2),E=g[0],v=g[1];return a.length>1?r.a.createElement(N,{maxWidth:500,verticalCentered:!0},r.a.createElement(B.a,null,a.map((function(e){return r.a.createElement(o.b,{key:e.id,to:"/join/".concat(e.id)},r.a.createElement(M.a,{tag:"button",action:!0},e.name))})))):1==a.length?r.a.createElement(i.a,{to:"/join/".concat(a[0].id)}):r.a.createElement(N,{maxWidth:500,verticalCentered:!0},r.a.createElement(s.a,{className:"mb-5",onSubmit:function(e){e.preventDefault(),J(E).then(c)}},r.a.createElement("img",{src:"https://i.postimg.cc/dtTTWm0k/logo512.png",alt:"Logo",width:"256",height:"256"}),r.a.createElement(m.a,null,r.a.createElement(d.a,{for:"shortCode"},"Numero de Juego:"),r.a.createElement(h.a,{id:"shortCode",type:"number",value:E,onChange:function(e){return v(e.target.value)}})),r.a.createElement(f.a,{color:"primary",disabled:!E,type:"submit"},"Encontrar Juego")))},V=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new y,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new T;return n.update(e,{state:"waitingForPlayers"}),a.list({gameId:e},t)},X=function(e){var t=e.players;return r.a.createElement(B.a,null,t.map((function(e){return r.a.createElement(M.a,{key:e.id},e.name)})))},Y=function(e){var t=Object(i.h)().gameId,a=Object(n.useState)([]),c=Object(u.a)(a,2),l=c[0],s=c[1],m=Object(n.useState)(null),d=Object(u.a)(m,2),h=d[0],g=d[1],E="".concat(window.location.origin,"/cahoots/");return Object(n.useEffect)((function(){t&&(V(t,s),A(t).then(g))}),[t]),r.a.createElement(N,{verticalCentered:!0,maxWidth:800},r.a.createElement("h1",{className:"mb-4"},"Esperando a jugadores..."),r.a.createElement("p",null,"To join, go to ",r.a.createElement("a",{href:E,rel:"noopener noreferrer",target:"_blank"},E)," and enter the game code ",r.a.createElement("strong",null,h?h.shortCode:"___")),r.a.createElement(X,{players:l}),r.a.createElement("div",{className:"mt-4"},r.a.createElement(o.b,{to:"/host/".concat(t,"/questions/pending")},r.a.createElement(f.a,{color:"primary"},"Empezar"))))},K=function(e){function t(){return Object(g.a)(this,t),Object(v.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(E.a)(t,[{key:"create",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.email,n=t.password;return this.auth.createUserWithEmailAndPassword(a,n).then((function(t){var a=t.user;return e._convertUser(a)})).catch((function(e){var t=e.code,a=e.message;"auth/weak-password"===t?alert("The password is too weak."):alert(a)}))}},{key:"login",value:function(e){var t=this,a=e.email,n=e.password;return this.auth.signInWithEmailAndPassword(a,n).then((function(e){var a=e.user;return t._convertUser(a)})).catch((function(e){var t=e.code,a=e.message;"auth/weak-password"===t?alert("The password is too weak."):alert(a)}))}},{key:"onCurrentUserChange",value:function(e){var t=this;this.auth.onAuthStateChanged((function(a){a&&e(t._convertUser(a))}))}},{key:"_convertUser",value:function(e){return{id:e.uid,email:e.email,name:e.displayName}}}]),t}(w),$=function(e){var t=e.email,a=e.password;return(new K).create({email:t,password:a})},Z=function(e){var t=e.email,a=e.password;return(new K).login({email:t,password:a})},ee=function(e,t){var a=t.email,n=t.password,r=t.authFn,c=t.successCallback;e.preventDefault(),r({email:a,password:n}).then((function(e){return c(e)}))},te=function(e){var t=e.onUserChange,a=Object(n.useState)(""),c=Object(u.a)(a,2),l=c[0],o=c[1],i=Object(n.useState)(""),g=Object(u.a)(i,2),E=g[0],v=g[1];return r.a.createElement(s.a,{className:"mb-5",onSubmit:function(e){return ee(e,{email:l,password:E,authFn:$,successCallback:t})}},r.a.createElement(m.a,null,r.a.createElement(d.a,{for:"email"},"Email:"),r.a.createElement(h.a,{id:"email",name:"email",value:l,onChange:function(e){return o(e.target.value)}})),r.a.createElement(m.a,null,r.a.createElement(d.a,null,"Password:"),r.a.createElement(h.a,{type:"password",name:"password",value:E,onChange:function(e){return v(e.target.value)}})),r.a.createElement(f.a,{color:"primary"},"Sign Up"))},ae=function(e){var t=e.onUserChange,a=Object(n.useState)(""),c=Object(u.a)(a,2),l=c[0],o=c[1],i=Object(n.useState)(""),g=Object(u.a)(i,2),E=g[0],v=g[1];return r.a.createElement(s.a,{className:"mb-5",onSubmit:function(e){return ee(e,{email:l,password:E,authFn:Z,successCallback:t})}},r.a.createElement(m.a,null,r.a.createElement(d.a,{for:"email"},"Email:"),r.a.createElement(h.a,{id:"email",name:"email",value:l,onChange:function(e){return o(e.target.value)}})),r.a.createElement(m.a,null,r.a.createElement(d.a,null,"Password:"),r.a.createElement(h.a,{type:"password",name:"password",value:E,onChange:function(e){return v(e.target.value)}})),r.a.createElement(f.a,{color:"primary"},"Login"))},ne=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(null),s=Object(u.a)(o,2),m=s[0],d=s[1],h=function(e){e.preventDefault(),l(!c)};return m?r.a.createElement(i.a,{to:"/games"}):c?r.a.createElement(N,{maxWidth:500,verticalCentered:!0},r.a.createElement("h1",null,"Login to Cahoots!"),r.a.createElement(ae,{onUserChange:d}),r.a.createElement("div",null,"No account? ",r.a.createElement("br",null),r.a.createElement(f.a,{color:"link",onClick:h},"Sign Up!"))):r.a.createElement(N,{maxWidth:500,verticalCentered:!0},r.a.createElement("h1",null,"Signup for Cahoots!"),r.a.createElement(te,{onUserChange:d}),r.a.createElement("div",null,"Have an account? ",r.a.createElement("br",null),r.a.createElement(f.a,{color:"link",onClick:h},"Login")))},re=function(){var e=new K;return new Promise((function(t){return e.onCurrentUserChange(t)}))},ce=function(){var e=new T;return re().then((function(t){return t?e.list({ownerId:t.id}):null}))},le=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(null),o=Object(u.a)(l,2),s=o[0],m=o[1];return Object(n.useEffect)((function(){ce().then(c)}),[]),s?r.a.createElement(i.a,{to:s}):r.a.createElement(I.a,{style:{maxWidth:"500px"}},r.a.createElement("h1",null,"Tus juegos"),r.a.createElement(B.a,null,a.map((function(e){return r.a.createElement(M.a,{key:e.id,onClick:function(){return m("/games/".concat(e.id))},tag:"button",action:!0},e.name)})),r.a.createElement(M.a,{onClick:function(){return m("/games/create")},tag:"button",color:"info",action:!0},"Crear Juego")))},oe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new T,a=String(Math.floor(Math.random()*Math.floor(9999)));return t.create(Object.assign({shortCode:a},e))},ie=function(e){var t=Object(n.useState)(null),a=Object(u.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(""),s=Object(u.a)(o,2),g=s[0],E=s[1],v=Object(n.useState)(null),b=Object(u.a)(v,2),p=b[0],j=b[1];return Object(n.useEffect)((function(){re().then(l)}),[]),p?r.a.createElement(i.a,{to:"/games"}):r.a.createElement(I.a,{style:{maxWidth:"500px"}},r.a.createElement("h1",null,"Crear un juego"),r.a.createElement(m.a,null,r.a.createElement(d.a,{for:"name"},"Name:"),r.a.createElement(h.a,{id:"name",name:"name",value:g,onChange:function(e){return E(e.target.value)}})),r.a.createElement(f.a,{color:"primary",onClick:function(){return e={name:g,ownerId:c.id},t=j,oe(e).then(t);var e,t}},"Save"))},ue=function(e){var t=new T,a=new z;return t.update(e,{state:"pendingQuestion"}),t.get(e).then((function(e){return"currentQuestion"in e?a.get(e.currentQuestion):void 0})).then((function(t){var n=t?t.order:0;return a.list({gameId:e,from:n,limit:1})})).then((function(a){var n=a[0];return n&&t.update(e,{currentQuestionId:n.id}),n}))},se=function e(t){var a=t.endDate,n=t.intervalCallback,r=t.endedCallback;setTimeout((function(){var t=function(e){var t=(e-Date.now())/1e3;return t>0?t:0}(a);t>0?(n(t),e({endDate:a,intervalCallback:n,endedCallback:r})):r(t)}),1e3)},me=function(e){var t=e.seconds,a=e.intervalCallback,n=e.endedCallback,r=new Date(Date.now()+1e3*t);se({endDate:r,intervalCallback:a,endedCallback:n})},de=function(e){var t=e.parentUrl,a=Object(i.h)().gameId,c=Object(n.useState)(5),l=Object(u.a)(c,2),o=l[0],s=l[1],m=Object(n.useState)(null),d=Object(u.a)(m,2),h=d[0],f=d[1];return Object(n.useEffect)((function(){a&&(me({seconds:5,intervalCallback:s,endedCallback:s}),ue(a).then(f))}),[a]),r.a.createElement(N,{verticalCentered:!0},r.a.createElement("div",{className:"mb-4"},"Proxima pregunta en:"),r.a.createElement("div",{className:"display-1"},Math.ceil(o)),o<=0&&h?r.a.createElement(i.a,{to:"".concat(t,"/questions/current")}):null)},he=a(86),fe=a(87),ge=a(88),Ee=a(89),ve=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new z;return a.get(e,t)},be=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new T,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new P;return a.update(e,{state:"showingQuestionResults"}),n.list({gameId:e,questionId:t}).then((function(e){var t={A:[],B:[],C:[],D:[]};return e.forEach((function(e){t[e.choice]=t[e.choice].concat(e.playerName)})),t}))},pe=function(e){return(new z).list({gameId:e}).then((function(e){return e.length}))},je=function(e,t){return e.correctAnswer===t},Oe=function(e){var t=e.result,a=e.className,n=e.question;return r.a.createElement("div",{className:a},r.a.createElement("h2",{className:"mb-4"},n?n.text:null),r.a.createElement(q.a,null,Object.entries(t).map((function(e){var t=Object(u.a)(e,2),a=t[0],c=t[1];return r.a.createElement(Q.a,{sm:12,md:6,className:"mb-4"},r.a.createElement(he.a,{color:je(n,a)?"success":null,inverse:!!je(n,a)||null},r.a.createElement(fe.a,null,r.a.createElement(ge.a,null,r.a.createElement("strong",{className:"mr-2"},a),je(n,a)?"\u2714\ufe0f":"\u274c"),r.a.createElement(Ee.a,null,c.join(", ")))))}))))},we=function(e){var t=e.parentUrl,a=Object(i.h)(),c=a.gameId,l=a.questionId,s=Object(n.useState)({}),m=Object(u.a)(s,2),d=m[0],h=m[1],g=Object(n.useState)(null),E=Object(u.a)(g,2),v=E[0],b=E[1],p=Object(n.useState)(null),j=Object(u.a)(p,2),O=j[0],w=j[1];return Object(n.useEffect)((function(){c&&l&&(ve(l,{gameId:c}).then(b),pe(c).then(w),be(c,l).then(h))}),[c,l]),r.a.createElement(N,{verticalCentered:!0},r.a.createElement(Oe,{className:"mb-4",result:d,question:v}),v&&v.order>=O?r.a.createElement(o.b,{to:"".concat(t,"/results/final")},r.a.createElement(f.a,{color:"primary"},"Mostrar resultados")):r.a.createElement(o.b,{to:"".concat(t,"/questions/pending")},r.a.createElement(f.a,{color:"primary"},"Proxima pregunta")))},ye=a(90),Ce=function(e){return(new P).list({gameId:e}).then((function(e){return e.filter((function(e){return"isCorrect"in e&&!!e.isCorrect})).reduce((function(e,t){return t.playerName in e?e[t.playerName]+=1:e[t.playerName]=1,e}),{})}))},Ie=function(e,t){var a=Object(u.a)(e,2)[1],n=Object(u.a)(t,2)[1];return a>n?-1:a<n?1:0},ke=function(e){var t=e.results,a=Object.entries(t);return a.sort(Ie),r.a.createElement(B.a,null,a.slice(0,5).map((function(e,t){var a=Object(u.a)(e,2),n=a[0],c=a[1];return t<=2?r.a.createElement(M.a,{key:n,className:"d-flex justify-content-between"},n,r.a.createElement(ye.a,{className:"ml-4 p-2",color:"success"},c)):r.a.createElement(M.a,{key:n,className:"d-flex justify-content-between"},n,r.a.createElement(ye.a,{className:"ml-4 p-2"},c))})))},Se=function(e){var t=Object(i.h)().gameId,a=Object(n.useState)({}),c=Object(u.a)(a,2),l=c[0],o=c[1];return Object(n.useEffect)((function(){t&&Ce(t).then(o)}),[t]),r.a.createElement(N,{verticalCentered:!0,maxWidth:500},r.a.createElement("h1",null,"Resultados finales"),r.a.createElement(ke,{results:l}))},Ne=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new T,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new z;return t.update(e,{state:"showingQuestion"}),t.get(e).then((function(e){return a.get(e.currentQuestion)}))},_e=function(e){var t=e.question,a=e.className;return r.a.createElement("div",{className:a},r.a.createElement("h2",{className:"mb-4"},t.text),r.a.createElement(q.a,null,["A","B","C","D"].map((function(e){return r.a.createElement(Q.a,{key:e,sm:12,md:6,className:"mb-4"},r.a.createElement(he.a,null,r.a.createElement(fe.a,null,r.a.createElement(ge.a,null,r.a.createElement("strong",null,e)),r.a.createElement(Ee.a,null,t["answer".concat(e)]))))}))))},Te=function(e){var t=e.isVisible,a=e.linkTo;return t?r.a.createElement(o.b,{to:a},r.a.createElement(f.a,{color:"primary"},"Mostrar resultados")):null},Ae=function(e){var t=e.parentUrl,a=Object(i.h)().gameId,c=Object(n.useState)(null),l=Object(u.a)(c,2),o=l[0],s=l[1],m=Object(n.useState)(15),d=Object(u.a)(m,2),h=d[0],f=d[1];return Object(n.useEffect)((function(){a&&(me({seconds:15,intervalCallback:f,endedCallback:f}),Ne(a).then(s))}),[a]),r.a.createElement(N,{verticalCentered:!0},o?r.a.createElement("div",null,r.a.createElement(_e,{question:o}),r.a.createElement("div",{className:"mt-4"},"Tiempo restante:aa"),r.a.createElement("div",{className:"display-1"},Math.ceil(h)),r.a.createElement(Te,{isVisible:h<=0,linkTo:"".concat(t,"/results/").concat(o.id)})):r.a.createElement("div",null,"cargando..."))},De=function(){var e=Object(i.i)(),t=e.url,a=e.path;return r.a.createElement(i.d,{base:!0},r.a.createElement(i.b,{path:"".concat(a,"/questions/pending")},r.a.createElement(de,{parentUrl:t})),r.a.createElement(i.b,{path:"".concat(a,"/questions/current")},r.a.createElement(Ae,{parentUrl:t})),r.a.createElement(i.b,{path:"".concat(a,"/results/final")},r.a.createElement(Se,{parentUrl:t})),r.a.createElement(i.b,{path:"".concat(a,"/results/:questionId")},r.a.createElement(we,{parentUrl:t})))},xe=function(e){return(new z).list(e)},qe=a(28),Qe=a(91),We=a(92),Ue=a(42),Pe=a(93),Ge=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new z,a=Object.assign({},e);if("id"in a){var n=G(a,"id");return t.update(n,a)}return t.create(a)},ze=function(e){var t=e.question,a=Object(n.useState)(t),c=Object(u.a)(a,2),l=c[0],o=c[1],i=Object(n.useState)("default"),s=Object(u.a)(i,2),g=s[0],E=s[1],v=function(e){o(Object.assign({},l,e))};return r.a.createElement("div",null,r.a.createElement(he.a,{body:!0,className:"mt-4 mb-4"},r.a.createElement(ge.a,null,r.a.createElement(Qe.a,{className:"mb-2"},r.a.createElement(h.a,{type:"textarea",placeholder:"Question text",value:l.text||"",onChange:function(e){return v({text:e.target.value})}}))),["answerA","answerB","answerC","answerD"].map((function(e){return r.a.createElement(Qe.a,{key:e,className:"mb-2"},r.a.createElement(We.a,{addonType:"prepend"},r.a.createElement(Ue.a,null,e)),r.a.createElement(h.a,{placeholder:"Answer",value:e in l?l[e]:"",onChange:function(t){return v(Object(qe.a)({},e,t.target.value))}}))})),r.a.createElement(m.a,null,r.a.createElement(d.a,{for:"correctAnswerDropdown"},"Correct Answer"),r.a.createElement(h.a,{type:"select",name:"correctAnswer",id:"correctAnswerDropdown","data-testid":"correctAnswerDropdown",value:l.correctAnswer||"A",onChange:function(e){return v({correctAnswer:e.target.value})}},r.a.createElement("option",null,"A"),r.a.createElement("option",null,"B"),r.a.createElement("option",null,"C"),r.a.createElement("option",null,"D"))),"saving"===g?r.a.createElement(f.a,{disabled:!0,color:"primary",className:"mt-4"},r.a.createElement(Pe.a,{type:"grow",size:"sm",color:"info",className:"mr-2"}),"Saving..."):r.a.createElement(f.a,{color:"primary",className:"mt-4",onClick:function(){E("saving"),Ge(l).then((function(){return E("default")}))}},"Save")))},Re=function(e){var t=Object(i.h)().gameId,a=Object(n.useState)(null),c=Object(u.a)(a,2),l=c[0],s=c[1],m=Object(n.useState)([]),d=Object(u.a)(m,2),h=d[0],g=d[1];return Object(n.useEffect)((function(){t&&null===l&&A(t).then((function(e){return s(e),e})).then((function(e){return xe({gameId:e.id})})).then(g)}),[t,l]),l?r.a.createElement(N,{maxWidth:500},r.a.createElement("h1",{className:"mb-4"},l.name),h.length>0?r.a.createElement(o.b,{to:"/lobby/".concat(t)},r.a.createElement(f.a,{color:"success",size:"lg"},"Empezar juego")):null,h.map((function(e){return r.a.createElement(ze,{key:e.id,question:e})})),r.a.createElement(f.a,{onClick:function(){Ge({gameId:t,order:h.length+1}).then((function(e){return g(h.concat([e]))}))}},"Agregar pregunta")):r.a.createElement(N,{maxWidth:500},"Loading...")},Fe=function(e){var t=new URLSearchParams(Object(i.g)().search).get("game");return r.a.createElement(N,{maxWidth:500,verticalCentered:!0},t)};var Le=function(){return r.a.createElement(o.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/login"},r.a.createElement(ne,null)),r.a.createElement(i.b,{path:"/host/:gameId"},r.a.createElement(De,null)),r.a.createElement(i.b,{path:"/lobby/:gameId"},r.a.createElement(Y,null)),r.a.createElement(i.b,{path:"/play/:gameId/as/:playerId"},r.a.createElement(L,null)),r.a.createElement(i.b,{path:"/join/:gameId"},r.a.createElement(x,null)),r.a.createElement(i.b,{path:"/join"},r.a.createElement(Fe,null)),r.a.createElement(i.b,{path:"/games/create"},r.a.createElement(ie,null)),r.a.createElement(i.b,{path:"/games/:gameId"},r.a.createElement(Re,null)),r.a.createElement(i.b,{exact:!0,path:"/games"},r.a.createElement(le,null)),r.a.createElement(i.b,{path:"/"},r.a.createElement(H,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(Le,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[43,1,2]]]);
//# sourceMappingURL=main.161e4bb6.chunk.js.map